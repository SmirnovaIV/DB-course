<?php
 class commerceMLExporter extends umiExporter {public function setOutputBuffer() {$v7f2db423a49b305459147332fb01cf87 = outputBuffer::current('HTTPOutputBuffer');$v7f2db423a49b305459147332fb01cf87->charset("utf-8");$v7f2db423a49b305459147332fb01cf87->contentType("text/xml");return $v7f2db423a49b305459147332fb01cf87;}public function getType() {return $this->type;}public function getSourceName() {$v2245023265ae4cf87d02c8b6ba991139 = mainConfiguration::getInstance();$v11afe4b7e9141a9733fba1111534287c = $v2245023265ae4cf87d02c8b6ba991139->get('modules', 'exchange.commerceML.siteId');if (!$v11afe4b7e9141a9733fba1111534287c) {$vad5f82e879a9c5d6b5b442eb37e50551 = domainsCollection::getInstance()->getDefaultDomain()->getHost();$v11afe4b7e9141a9733fba1111534287c = md5($vad5f82e879a9c5d6b5b442eb37e50551);}if (strlen($v11afe4b7e9141a9733fba1111534287c) > 2) {$v11afe4b7e9141a9733fba1111534287c = substr($v11afe4b7e9141a9733fba1111534287c, 0, 2);$v2245023265ae4cf87d02c8b6ba991139->set('modules', 'exchange.commerceML.siteId', $v11afe4b7e9141a9733fba1111534287c);}return $v11afe4b7e9141a9733fba1111534287c;}public function export($v92ec19ffde05e15769b1bb3ee05ad745, $v593d4791d99adff3d667c8b1f5c3894b) {if (!count($v92ec19ffde05e15769b1bb3ee05ad745)) {$v8be74552df93e31bbdd6b36ed74bdb6a = new selector('pages');$v8be74552df93e31bbdd6b36ed74bdb6a->where('hierarchy')->page(0)->childs(0);$v8be74552df93e31bbdd6b36ed74bdb6a->types('hierarchy-type')->name('catalog', 'category');$v8be74552df93e31bbdd6b36ed74bdb6a->types('hierarchy-type')->name('catalog', 'object');$v92ec19ffde05e15769b1bb3ee05ad745 = $v8be74552df93e31bbdd6b36ed74bdb6a->result();}$ved780287e302ec3b9fd3c5e78771919f = new xmlExporter($this->getSourceName());$ved780287e302ec3b9fd3c5e78771919f->addBranches($v92ec19ffde05e15769b1bb3ee05ad745);$ved780287e302ec3b9fd3c5e78771919f->setIgnoreRelations();$ved780287e302ec3b9fd3c5e78771919f->excludeBranches($v593d4791d99adff3d667c8b1f5c3894b);$result = $ved780287e302ec3b9fd3c5e78771919f->execute();$vbbd738a112791dd1d0cb6bd0d61d878f = $result->saveXML();$vd0c75bac742760cf71fd76cd75d0c02a = './xsl/export/' . $this->type . '.xsl';if (!is_file($vd0c75bac742760cf71fd76cd75d0c02a)) {throw new publicException("Can't load exporter {$vd0c75bac742760cf71fd76cd75d0c02a}");}$v9a09b4dfda82e3e665e31092d1c3ec8d = new DOMDocument("1.0", "utf-8");$v9a09b4dfda82e3e665e31092d1c3ec8d->formatOutput = XML_FORMAT_OUTPUT;$v9a09b4dfda82e3e665e31092d1c3ec8d->loadXML($vbbd738a112791dd1d0cb6bd0d61d878f);$v640eac53ad75db5c49a9ec86390d8530 = umiTemplater::create('XSLT', $vd0c75bac742760cf71fd76cd75d0c02a);return $v640eac53ad75db5c49a9ec86390d8530->parse($v9a09b4dfda82e3e665e31092d1c3ec8d);}}?>